/* FinServe Analytics — Design System
   Based on finserve-components.html v1.0 */

@import url('https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,600;0,9..144,700;1,9..144,400&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&display=swap');

/* ── TOKENS ── */
:root {
  --navy:       #1B2B4B;
  --navy-mid:   #243660;
  --navy-lt:    #EEF1F7;
  --gold:       #C8922A;
  --gold-lt:    #E8B458;
  --gold-pale:  #FBF4E8;
  --green:      #2D5E40;
  --green-lt:   #3D7A56;
  --green-pale: #EBF4EE;
  --red:        #DC2626;
  --red-pale:   #FEF2F2;
  --gray-800:   #2C2C2C;
  --gray-600:   #4B5563;
  --gray-500:   #6B7280;
  --gray-400:   #9CA3AF;
  --gray-200:   #E5DDD0;
  --gray-100:   #F0EBE1;
  --gray-50:    #FAF7F2;
  --white:      #FFFDF9;

  --radius-sm:  6px;
  --radius-md:  10px;
  --radius-lg:  16px;
  --radius-full:999px;

  --shadow-sm: 0 1px 3px rgba(27,43,75,0.08);
  --shadow-md: 0 4px 16px rgba(27,43,75,0.1);
  --shadow-lg: 0 10px 40px rgba(27,43,75,0.14);

  --font-display: 'Fraunces', Georgia, serif;
  --font-body:    'DM Sans', system-ui, sans-serif;
}

/* ── RESET ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { height: 100%; }
body {
  font-family: var(--font-body);
  background: var(--gray-100);
  color: var(--navy);
  -webkit-font-smoothing: antialiased;
  height: 100%;
}
a { text-decoration: none; color: inherit; }
button { font-family: var(--font-body); cursor: pointer; border: none; background: none; }

/* ── TOPBAR ── */
.topbar {
  background: var(--navy);
  height: 68px;
  display: flex;
  align-items: center;
  padding: 0 32px;
  gap: 6px;
  position: sticky;
  top: 0;
  z-index: 100;
  flex-shrink: 0;
  position: relative;
}
.topbar::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--gold) 0%, var(--green) 55%, var(--navy-mid) 100%);
}
.topbar-logo { display: flex; align-items: center; gap: 10px; margin-right: 16px; }
.topbar-logo-text .t-brand {
  font-family: var(--font-display);
  font-size: 15px; font-weight: 600; color: #fff;
  display: block; line-height: 1;
}
.topbar-logo-text .t-sub {
  font-size: 8px; letter-spacing: 0.2em;
  text-transform: uppercase; color: var(--gold-lt);
  display: block; margin-top: 2px;
}
.topbar-nav { display: flex; gap: 2px; }
.topbar-link {
  padding: 7px 14px;
  border-radius: var(--radius-sm);
  font-size: 13px; font-weight: 400;
  color: rgba(255,255,255,0.55);
  transition: all 0.15s; cursor: pointer;
  text-decoration: none;
}
.topbar-link:hover  { color: #fff; background: rgba(255,255,255,0.08); }
.topbar-link.active { color: #fff; background: rgba(255,255,255,0.12); }
.topbar-right { display: flex; align-items: center; gap: 10px; }
.topbar-avatar {
  width: 30px; height: 30px; border-radius: 50%;
  background: var(--navy-mid); border: 1.5px solid rgba(255,255,255,0.15);
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; font-weight: 500; color: rgba(255,255,255,0.65);
}
.topbar-user { font-size: 13px; color: rgba(255,255,255,0.55); }

/* ── PAGE LAYOUT ── */
.page-container { max-width: 1200px; margin: 0 auto; padding: 32px 24px; }
.page-header-row {
  display: flex; align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 28px; gap: 16px;
}
.page-title {
  font-family: var(--font-display);
  font-size: 26px; font-weight: 600; color: var(--navy); line-height: 1.2;
}
.page-subtitle { font-size: 13.5px; font-weight: 300; color: var(--gray-500); margin-top: 4px; }

/* ── GRIDS ── */
.grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.col-span-2 { grid-column: span 2; }

/* ── STAT CARDS ── */
.stat-card {
  background: var(--white); border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg); padding: 20px 22px;
  box-shadow: var(--shadow-sm); position: relative; overflow: hidden;
}
.stat-card::before {
  content: ''; position: absolute;
  top: 0; left: 0; right: 0; height: 3px;
}
.stat-card.navy::before  { background: var(--navy); }
.stat-card.gold::before  { background: var(--gold); }
.stat-card.green::before { background: var(--green); }
.stat-card.red::before   { background: var(--red); }
.stat-label {
  font-size: 10.5px; font-weight: 500; letter-spacing: 0.12em;
  text-transform: uppercase; color: var(--gray-400); margin-bottom: 8px;
}
.stat-value {
  font-family: var(--font-display);
  font-size: 30px; font-weight: 600; color: var(--navy); line-height: 1;
}
.stat-delta { font-size: 12px; font-weight: 500; margin-top: 6px; }
.stat-delta.up   { color: var(--green); }
.stat-delta.down { color: var(--red); }
.stat-note { font-size: 12px; color: var(--gray-400); margin-top: 3px; }

/* ── CARDS ── */
.card {
  background: var(--white); border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); overflow: hidden;
}
.card-header {
  padding: 20px 24px 0;
  display: flex; align-items: flex-start; justify-content: space-between;
}
.card-body  { padding: 16px 24px 24px; }
.card-footer {
  padding: 14px 24px; border-top: 1px solid var(--gray-200);
  display: flex; align-items: center; gap: 10px;
}
.card-title    { font-family: var(--font-display); font-size: 16px; font-weight: 600; color: var(--navy); }
.card-subtitle { font-size: 13px; color: var(--gray-500); margin-top: 2px; }

/* ── BUTTONS ── */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 7px;
  font-family: var(--font-body); font-weight: 500; border: none; cursor: pointer;
  border-radius: var(--radius-md); transition: all 0.15s ease; white-space: nowrap;
}
.btn-lg { padding: 13px 26px; font-size: 15px; }
.btn-md { padding: 10px 20px; font-size: 14px; }
.btn-sm { padding: 7px 14px;  font-size: 13px; }
.btn-xs { padding: 4px 10px;  font-size: 12px; }

.btn-primary { background: var(--navy); color: #fff; box-shadow: 0 2px 8px rgba(27,43,75,0.22); }
.btn-primary:hover { background: var(--navy-mid); transform: translateY(-1px); }
.btn-gold { background: var(--gold); color: #fff; box-shadow: 0 2px 8px rgba(200,146,42,0.28); }
.btn-gold:hover { background: #D9A43C; transform: translateY(-1px); }
.btn-green { background: var(--green); color: #fff; }
.btn-green:hover { background: var(--green-lt); transform: translateY(-1px); }
.btn-outline { background: transparent; color: var(--navy); border: 1.5px solid var(--gray-200); }
.btn-outline:hover { border-color: var(--navy); background: var(--navy-lt); }
.btn-ghost { background: transparent; color: var(--gray-500); }
.btn-ghost:hover { background: var(--gray-100); color: var(--navy); }
.btn-danger { background: var(--red); color: #fff; }
.btn-danger:hover { background: #B91C1C; }
.btn:disabled { opacity: 0.45; pointer-events: none; transform: none !important; }

/* ── BADGES ── */
.badge {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 3px 9px; border-radius: var(--radius-full);
  font-size: 11px; font-weight: 500;
}
.badge-dot::before { content: ''; width: 5px; height: 5px; border-radius: 50%; background: currentColor; }
.badge-navy   { background: var(--navy-lt);   color: var(--navy); }
.badge-gold   { background: var(--gold-pale);  color: #8B6318; }
.badge-green  { background: var(--green-pale); color: var(--green); }
.badge-red    { background: var(--red-pale);   color: var(--red); }
.badge-gray   { background: var(--gray-100);   color: var(--gray-500); }

/* ── CITATION CHIPS ── */
.citation-chip {
  display: inline-flex; align-items: center;
  padding: 3px 9px; border-radius: var(--radius-full);
  font-size: 10.5px; font-weight: 500;
  background: var(--gold-pale); color: #8B6318;
  border: 1px solid #EDD9A3; transition: background 0.15s;
}
.citation-chip:hover { background: #F5E8CC; }

/* ── FORMS ── */
.input {
  width: 100%; padding: 10px 14px;
  border: 1.5px solid var(--gray-200); border-radius: var(--radius-md);
  font-size: 14px; font-family: var(--font-body); color: var(--navy);
  background: var(--white); outline: none;
  transition: border-color 0.15s, box-shadow 0.15s;
}
.input::placeholder { color: var(--gray-400); }
.input:hover  { border-color: #C8C0B0; }
.input:focus  { border-color: var(--navy); box-shadow: 0 0 0 3px rgba(27,43,75,0.07); }

.select {
  width: 100%; padding: 9px 36px 9px 12px;
  border: 1.5px solid var(--gray-200); border-radius: var(--radius-md);
  font-size: 13.5px; font-family: var(--font-body); color: var(--navy);
  background: var(--white); appearance: none; outline: none; cursor: pointer;
  background-image: url("data:image/svg+xml,%3Csvg width='12' height='7' viewBox='0 0 12 7' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%239CA3AF' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat; background-position: right 12px center;
  transition: border-color 0.15s;
}
.select:focus { border-color: var(--navy); box-shadow: 0 0 0 3px rgba(27,43,75,0.07); }

/* ── DATA ROWS ── */
.data-row {
  display: flex; align-items: center; gap: 14px;
  padding: 14px 8px; border-bottom: 1px solid var(--gray-200);
  cursor: pointer; transition: background 0.1s;
  border-radius: var(--radius-sm);
}
.data-row:last-child { border-bottom: none; }
.data-row:hover { background: var(--gray-50); }
.dr-icon {
  width: 36px; height: 36px; border-radius: var(--radius-md);
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; flex-shrink: 0; background: var(--navy-lt);
}
.dr-main  { flex: 1; min-width: 0; }
.dr-title { font-size: 14px; font-weight: 500; color: var(--navy); }
.dr-sub   { font-size: 12px; color: var(--gray-500); margin-top: 2px; }
.dr-right { text-align: right; flex-shrink: 0; display: flex; align-items: center; gap: 8px; }

/* ── AI RESPONSE CARD ── */
.ai-response-card {
  background: var(--gold-pale); border: 1px solid #EDD9A3;
  border-radius: var(--radius-lg); overflow: hidden;
}
.ai-response-header {
  display: flex; align-items: center; gap: 8px;
  padding: 10px 16px; border-bottom: 1px solid #EDD9A3;
  background: rgba(200,146,42,0.06);
}
.ai-indicator { width: 8px; height: 8px; border-radius: 50%; background: var(--gold); flex-shrink: 0; }
.ai-label { font-size: 11px; font-weight: 500; letter-spacing: 0.1em; text-transform: uppercase; color: #8B6318; }
.ai-response-time { margin-left: auto; font-size: 11px; color: var(--gray-400); }
.ai-response-body {
  padding: 16px; font-size: 14px; line-height: 1.75;
  color: var(--gray-800); white-space: pre-wrap;
}
.ai-response-footer {
  padding: 10px 16px; border-top: 1px solid #EDD9A3;
  display: flex; align-items: center; gap: 8px; flex-wrap: wrap;
}
.citations-label { font-size: 11px; font-weight: 500; color: var(--gray-400); margin-right: 2px; }
.feedback-row { margin-left: auto; display: flex; align-items: center; gap: 6px; }
.feedback-btn {
  width: 30px; height: 30px; border-radius: var(--radius-sm);
  display: flex; align-items: center; justify-content: center;
  font-size: 15px; cursor: pointer; background: transparent;
  border: 1.5px solid var(--gray-200); transition: all 0.15s; line-height: 1;
}
.feedback-btn:hover { background: var(--gray-100); border-color: var(--gray-400); }
.feedback-btn.active-up   { background: var(--green-pale); border-color: var(--green); }
.feedback-btn.active-down { background: var(--red-pale); border-color: var(--red); }

/* ── COMPLIANCE FLAG ── */
.compliance-flag {
  background: var(--red-pale); border: 1px solid #FECACA;
  border-radius: var(--radius-lg); padding: 14px 16px;
  display: flex; gap: 12px; margin-bottom: 12px;
}
.compliance-flag-icon { font-size: 20px; flex-shrink: 0; margin-top: 1px; }
.compliance-flag-content { flex: 1; min-width: 0; }
.compliance-flag-title { font-size: 13px; font-weight: 600; color: var(--red); margin-bottom: 4px; }
.compliance-flag-desc  { font-size: 12.5px; color: #7F1D1D; line-height: 1.5; }
.compliance-flag-clauses { margin-top: 8px; display: flex; gap: 6px; flex-wrap: wrap; }
.clause-chip {
  font-size: 11px; font-weight: 500;
  padding: 2px 8px; border-radius: var(--radius-full);
  background: #FEE2E2; color: var(--red); border: 1px solid #FECACA;
}
.compliance-actions { margin-top: 10px; display: flex; gap: 8px; }

/* ── CHAT LAYOUT ── */
.chat-layout {
  display: flex; flex-direction: column;
  height: calc(100vh - 56px);
}
.chat-header {
  background: var(--white); border-bottom: 1px solid var(--gray-200);
  padding: 14px 24px; display: flex; align-items: center; gap: 16px; flex-shrink: 0;
}
.chat-thread {
  flex: 1; overflow-y: auto; padding: 24px;
  display: flex; flex-direction: column; gap: 20px;
  background: var(--gray-50);
}
.chat-input-area {
  background: var(--white); border-top: 1px solid var(--gray-200);
  padding: 14px 24px; flex-shrink: 0;
}
.chat-input-row { display: flex; gap: 10px; align-items: flex-end; }
.chat-textarea {
  flex: 1; padding: 10px 14px;
  border: 1.5px solid var(--gray-200); border-radius: var(--radius-lg);
  font-size: 14px; font-family: var(--font-body); color: var(--navy);
  background: var(--white); outline: none; resize: none;
  min-height: 44px; max-height: 120px;
  transition: border-color 0.15s; line-height: 1.5;
}
.chat-textarea:focus { border-color: var(--navy); box-shadow: 0 0 0 3px rgba(27,43,75,0.07); }
.chat-send-btn {
  width: 44px; height: 44px; border-radius: var(--radius-md);
  background: var(--navy); color: #fff;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; flex-shrink: 0; transition: all 0.15s; border: none; font-size: 18px;
}
.chat-send-btn:hover { background: var(--navy-mid); transform: translateY(-1px); }
.chat-send-btn:disabled { opacity: 0.4; transform: none; cursor: not-allowed; }

/* ── MESSAGE BUBBLES ── */
.user-message { display: flex; justify-content: flex-end; }
.user-bubble {
  background: var(--navy); color: #fff;
  border-radius: var(--radius-lg) var(--radius-lg) 4px var(--radius-lg);
  padding: 10px 14px; font-size: 14px; line-height: 1.5; max-width: 72%;
}

/* ── CLIENT CONTEXT ── */
.client-strip { display: flex; align-items: center; gap: 12px; flex: 1; min-width: 0; }
.client-avatar {
  width: 38px; height: 38px; border-radius: 50%;
  background: var(--navy-lt); border: 2px solid var(--gray-200);
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; flex-shrink: 0;
}
.client-name  { font-size: 15px; font-weight: 600; color: var(--navy); }
.client-meta  { font-size: 12px; color: var(--gray-500); margin-top: 2px; }

/* ── THINKING STATE ── */
.thinking-card {
  background: var(--gold-pale); border: 1px solid #EDD9A3;
  border-radius: var(--radius-lg); padding: 14px 16px;
  display: flex; align-items: center; gap: 10px;
}
.thinking-dots { display: flex; gap: 4px; align-items: center; }
.thinking-dot {
  width: 7px; height: 7px; border-radius: 50%; background: var(--gold);
  animation: thinkPulse 1.2s ease-in-out infinite;
}
.thinking-dot:nth-child(2) { animation-delay: 0.2s; }
.thinking-dot:nth-child(3) { animation-delay: 0.4s; }
.thinking-label { font-size: 13px; color: #8B6318; }
.thinking-timer { margin-left: auto; font-size: 13px; color: var(--gray-400); font-variant-numeric: tabular-nums; }

@keyframes thinkPulse {
  0%, 80%, 100% { opacity: 0.3; transform: scale(0.85); }
  40% { opacity: 1; transform: scale(1); }
}

/* ── EMPTY STATE ── */
.empty-state {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; text-align: center;
  padding: 48px 24px; flex: 1;
}
.empty-state-icon  { font-size: 44px; margin-bottom: 14px; opacity: 0.45; }
.empty-state-title { font-family: var(--font-display); font-size: 18px; color: var(--navy); margin-bottom: 8px; }
.empty-state-desc  { font-size: 13.5px; color: var(--gray-500); line-height: 1.65; max-width: 340px; }
.quick-queries     { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-top: 20px; }

/* ── PROGRESS BAR ── */
.progress-track { height: 6px; background: var(--gray-100); border-radius: var(--radius-full); overflow: hidden; }
.progress-fill  { height: 100%; border-radius: var(--radius-full); transition: width 0.3s ease; }
.progress-navy  { background: var(--navy); }
.progress-gold  { background: var(--gold); }
.progress-green { background: var(--green); }

/* ── EVAL TABLE ── */
.eval-table { width: 100%; border-collapse: collapse; }
.eval-table th {
  font-size: 11px; font-weight: 500; letter-spacing: 0.1em; text-transform: uppercase;
  color: var(--gray-400); padding: 8px 12px; text-align: left;
  border-bottom: 1px solid var(--gray-200);
}
.eval-table td { padding: 13px 12px; font-size: 13.5px; border-bottom: 1px solid var(--gray-200); color: var(--navy); }
.eval-table tr:last-child td { border-bottom: none; }
.eval-table tr:hover td { background: var(--gray-50); }

/* ── UTILS ── */
.mt-4  { margin-top: 4px; }
.mt-8  { margin-top: 8px; }
.mt-12 { margin-top: 12px; }
.mt-16 { margin-top: 16px; }
.mt-24 { margin-top: 24px; }
.mb-16 { margin-bottom: 16px; }
.flex  { display: flex; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.gap-8  { gap: 8px; }
.gap-12 { gap: 12px; }
.gap-16 { gap: 16px; }
.font-display  { font-family: var(--font-display); }
.text-sm       { font-size: 13px; }
.text-xs       { font-size: 11px; }
.font-medium   { font-weight: 500; }
.font-semibold { font-weight: 600; }
.text-gray     { color: var(--gray-500); }
.text-navy     { color: var(--navy); }
.text-gold     { color: var(--gold); }
.text-green    { color: var(--green); }
.text-red      { color: var(--red); }

/* ── ANIMATIONS ── */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}
.fade-up   { animation: fadeUp 0.35s ease both; }
.fade-up-1 { animation: fadeUp 0.35s ease 0.05s both; }
.fade-up-2 { animation: fadeUp 0.35s ease 0.10s both; }
.fade-up-3 { animation: fadeUp 0.35s ease 0.15s both; }
.fade-up-4 { animation: fadeUp 0.35s ease 0.20s both; }
